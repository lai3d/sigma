# Add this to your prometheus.yml scrape_configs section
# The file_sd target file is generated by scripts/sync-targets.sh

scrape_configs:
  - job_name: 'vps-node-exporter'
    file_sd_configs:
      - files:
          - '/etc/prometheus/targets/sigma.json'
        refresh_interval: 60s

    # Optional: relabel to make dashboards cleaner
    relabel_configs:
      # Use instance_name as the display name
      - source_labels: [instance_name]
        target_label: instance_display

      # Create a region label from country
      - source_labels: [country]
        regex: '(HK|TW|JP|SG|KR)'
        target_label: region
        replacement: 'asia'
      - source_labels: [country]
        regex: '(US|CA)'
        target_label: region
        replacement: 'americas'
      - source_labels: [country]
        regex: '(DE|NL|GB|FR|RU)'
        target_label: region
        replacement: 'europe'
